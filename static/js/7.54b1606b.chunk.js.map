{"version":3,"sources":["src/components/AmountMeta.tsx","src/components/InsufficientBalanceButton.tsx","src/components/Notice.tsx","src/components/TokenSymbol.tsx","src/components/ApproveButton.tsx","src/components/TokenAmount.tsx","src/components/TokenName.tsx","src/hooks/useDelayedEffect.tsx","src/components/TokenPrice.tsx","src/components/TokenValue.tsx","src/components/Select.tsx","src/components/UnsupportedButton.tsx","node_modules/eth-permit/dist/eth-permit.js","node_modules/eth-permit/dist/rpc.js","node_modules/eth-permit/dist/lib.js","node_modules/utf8/utf8.js","src/components/TokenSearch.tsx","src/components/TokenSelect.tsx","src/hooks/useZapper.tsx","src/hooks/useAddLiquidityState.tsx","src/screens/LiquidityScreen.tsx"],"names":["AmountMeta","props","t","useTranslation","useColors","textDark","textLight","placeholder","style","fontSize","IS_DESKTOP","marginBottom","Spacing","normal","color","disabled","amount","suffix","InsufficientBalanceButton","symbol","title","Notice","borderStyle","border","useStyles","clear","note","text","buttonText","onPressButton","type","size","fontWeight","onPress","titleStyle","buttonStyle","paddingHorizontal","paddingVertical","alignSelf","marginTop","tiny","TokenSymbol","medium","caption","marginLeft","token","ApproveButton","approveToken","useContext","EthersContext","useState","loading","setLoading","useCallback","a","async","onError","address","spender","tx","wait","onSuccess","hidden","containerStyle","TokenAmount","formatBalance","balance","decimals","TokenName","numberOfLines","ellipsizeMode","small","width","name","handles","useDelayedEffect","effect","timeout","inputs","key","toString","useAsyncEffect","handle","setTimeout","clearTimeout","TokenPrice","formatUSD","priceUSD","TokenValue","valueUSD","Item","ITEM_SEPARATOR_HEIGHT","paddingLeft","paddingRight","selected","selectable","setOption","undefined","option","alignItems","flex","description","Select","expanded","onExpand","options","map","UnsupportedButton","state","fromSymbol","toSymbol","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","signERC2612Permit","signDaiPermit","rpc_1","lib_1","MAX_INT","EIP712Domain","zeros","numZeros","padEnd","getTokenName","provider","hexToUtf8","call","substr","getDomain","tokenAddress","chainId","all","getChainId","version","verifyingContract","holder","expiry","nonce","message","allowed","typedData","domain","types","Permit","primaryType","createTypedDaiData","sig","signData","assign","owner","deadline","createTypedERC2612Data","setChainIdOverride","send","method","params","payload","id","Math","floor","random","callback","err","error","console","_provider","sendAsync","fromAddress","typeData","typeDataString","JSON","stringify","catch","r","slice","s","v","parseInt","chainIdOverride","to","data","__importDefault","mod","__esModule","utf8_1","hex","str","code","l","replace","split","reverse","join","length","i","String","fromCharCode","default","decode","root","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","extra","output","counter","charCodeAt","push","checkScalarValue","codePoint","Error","toUpperCase","createByte","shift","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","encode","codePoints","index","byteString","tmp","array","ucs2encode","Loading","ActivityIndicator","position","right","bottom","TokenItem","accent","onSelectToken","Selectable","FlexView","TokenLogo","View","Button","duplicate","height","TokenSearch","tokens","tokenToAdd","setTokenToAdd","findIndex","tk","useEffect","trim","ethers","utils","isAddress","findOrFetchToken","Input","onChangeText","autoFocus","inputStyle","marginHorizontal","inputContainerStyle","borderBottomWidth","marginRight","labelStyle","paddingTop","paddingBottom","onAddToken","TokenList","loadingTokens","renderItem","item","useMemo","filter","sort","compareTokens","FlatList","keyExtractor","EmptyList","margin","Text","textAlign","CloseIcon","SelectIcon","t1","t2","isZero","value2","value1","localeCompare","TokenSelect","addCustomToken","search","setSearch","query","setQuery","find","toLowerCase","Expandable","onChangeSymbol","includes","useZapper","ethereum","useSDK","getPair","getTrade","calculateAmountOfLPTokenMinted","useSwapRouter","allowedSlippage","ttl","zapSlippage","Percent","populateSwapData","fromToken","toToken","signer","trade","Router","swapCallParameters","feeOnTransfer","recipient","ZAP_IN","router","getContract","ROUTER","populateTransaction","methodName","args","zapIn","fromAmount","pair","convertToken","div","getOutputAmount","lpTokenAmount","contract","liquidityToken","deduct","isETH","constants","Zero","estimateGas","ZapIn","gasLimit","mul","logTransaction","arg","getZapOutSwappedAmount","outputToken","lpToken","tokenA","tokenB","fromReserve","parseCurrencyAmount","reserveOf","totalSupply","outputAmount","zapOut","ZAP_OUT","Date","getTime","getAddress","permit","ZapOutWithPermit","useAddLiquidityState","useTokenPairState","updateTokens","mode","setMode","setPair","adding","setAdding","addLiquidity","addLiquidityETH","priceDetermined","priceOf","denominator","startsWith","setFromSymbol","useDelayedOnBlockEffect","block","onAdd","toAmount","parseBalance","amountETH","AddLiquidity","large","Border","ItemSeparator","ModeSelect","FromTokenSelect","customTokens","Heading","ToTokenSelect","setToSymbol","FromTokenInput","TokenInput","onAmountChanged","newAmount","setFromAmount","quote","convertAmount","toExact","setToAmount","isEmptyValue","hideMaxButton","ToTokenInput","ZapNotice","PriceInfo","FirstProviderInfo","red","green","noAmount","initialPrice","Fraction","from","zap","InfoBox","price","isETHWETHPair","FirstProviderControls","setError","fromApproveRequired","fromTokenAllowed","toApproveRequired","toTokenAllowed","FetchingButton","gt","setFromTokenAllowed","setToTokenAllowed","ErrorMessage","PairPriceInfo","useAmountCalculator","toFixed","Meta","label","setAmount","minted","PriceMeta","Controls","useZapTokenAllowance","setAllowed","zapToken","getTokenAllowance","minAllowance","BigNumber","pow","sub","fromAllowance","gte","SupplyButton","goToRemoveLiquidity","useLinker","LiquidityScreen","Screen","Container","BackgroundImage","Content","Title","light","Platform","OS","WebFooter"],"mappings":"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","file":"static/js/7.54b1606b.chunk.js","sourcesContent":["import React, { FC } from \"react\";\n\nimport { IS_DESKTOP, Spacing } from \"../constants/dimension\";\nimport useColors from \"../hooks/useColors\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Text from \"./Text\";\n\nexport interface AmountMetaProps {\n    amount?: string;\n    suffix?: string;\n    disabled?: boolean;\n}\n\nconst AmountMeta: FC<AmountMetaProps> = props => {\n    const t = useTranslation();\n    const { textDark, textLight, placeholder } = useColors();\n    return (\n        <Text\n            style={{\n                fontSize: IS_DESKTOP ? 28 : 20,\n                marginBottom: Spacing.normal,\n                color: props.disabled ? placeholder : props.amount ? textDark : textLight\n            }}>\n            {props.disabled ? t(\"n/a\") : props.amount ? props.amount + \" \" + (props.suffix || \"\") : t(\"fetching\")}\n        </Text>\n    );\n};\n\nexport default AmountMeta;\n","import React from \"react\";\n\nimport useTranslation from \"../hooks/useTranslation\";\nimport Button from \"./Button\";\n\nconst InsufficientBalanceButton = ({ symbol }: { symbol: string }) => {\n    const t = useTranslation();\n    return <Button title={symbol ? t(\"insufficient-\", { symbol }) : t(\"insufficient-balance\")} disabled={true} />;\n};\nexport default InsufficientBalanceButton;\n","import React from \"react\";\nimport { View, ViewStyle } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport useColors from \"../hooks/useColors\";\nimport useStyles from \"../hooks/useStyles\";\nimport Button from \"./Button\";\nimport Text from \"./Text\";\n\nexport interface NoticeProps {\n    text: string;\n    clear?: boolean;\n    color?: string;\n    buttonText?: string;\n    onPressButton?: () => void;\n    style?: ViewStyle;\n}\n\nconst Notice = (props: NoticeProps) => {\n    const { textLight } = useColors();\n    const { border } = useStyles();\n    const borderStyle = border({ color: props.color });\n    const color = props.color || textLight;\n    return (\n        <View style={[props.clear ? {} : borderStyle, props.style]}>\n            <Text note={true} style={{ color }}>\n                {props.text}\n            </Text>\n            {props.buttonText && props.onPressButton && (\n                <Button\n                    title={props.buttonText}\n                    type={\"clear\"}\n                    size={\"small\"}\n                    fontWeight={\"bold\"}\n                    onPress={props.onPressButton}\n                    titleStyle={{ color }}\n                    buttonStyle={{ paddingHorizontal: 0, paddingVertical: 0 }}\n                    style={{ alignSelf: \"flex-end\", marginTop: Spacing.tiny }}\n                />\n            )}\n        </View>\n    );\n};\n\nexport default Notice;\n","import React from \"react\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport Token from \"../types/Token\";\nimport Text from \"./Text\";\n\nconst TokenSymbol = (props: { token: Token; disabled?: boolean }) => (\n    <Text medium={true} caption={true} disabled={props.disabled} style={{ marginLeft: Spacing.tiny }}>\n        {props.token.symbol}\n    </Text>\n);\n\nexport default TokenSymbol;\n","import React, { FC, useCallback, useContext, useState } from \"react\";\nimport { View } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Token from \"../types/Token\";\nimport Button from \"./Button\";\n\nexport interface ApproveButtonProps {\n    token: Token;\n    spender: string;\n    onSuccess: () => void;\n    onError: (e) => void;\n    hidden?: boolean;\n}\n\nconst ApproveButton: FC<ApproveButtonProps> = props => {\n    const t = useTranslation();\n    const { approveToken } = useContext(EthersContext);\n    const [loading, setLoading] = useState(false);\n    const onPress = useCallback(async () => {\n        if (props.token) {\n            props.onError({});\n            setLoading(true);\n            try {\n                const tx = await approveToken(props.token.address, props.spender);\n                if (tx) {\n                    await tx.wait();\n                    props.onSuccess();\n                }\n            } catch (e) {\n                props.onError(e);\n            } finally {\n                setLoading(false);\n            }\n        }\n    }, [props.token]);\n    if (props.hidden) return <View />;\n    return (\n        <Button\n            title={t(\"approve\") + \" \" + (props.token?.symbol || \"\")}\n            onPress={onPress}\n            loading={loading}\n            containerStyle={{ marginBottom: Spacing.tiny }}\n        />\n    );\n};\n\nexport default ApproveButton;\n","import React from \"react\";\nimport { TextStyle } from \"react-native\";\n\nimport { ethers } from \"ethers\";\nimport { IS_DESKTOP } from \"../constants/dimension\";\nimport Token from \"../types/Token\";\nimport { formatBalance } from \"../utils\";\nimport Text from \"./Text\";\n\nconst TokenAmount = (props: { token: Token; amount?: ethers.BigNumber; disabled?: boolean; style?: TextStyle }) => (\n    <Text caption={IS_DESKTOP} disabled={props.disabled} style={props.style}>\n        {formatBalance(props.amount || props.token.balance, props.token.decimals, 8)}\n    </Text>\n);\n\nexport default TokenAmount;\n","import React from \"react\";\n\nimport { IS_DESKTOP, Spacing } from \"../constants/dimension\";\nimport Token from \"../types/Token\";\nimport Text from \"./Text\";\n\nconst TokenName = (props: { token: Token; disabled?: boolean }) => (\n    <Text\n        caption={true}\n        numberOfLines={1}\n        ellipsizeMode={\"tail\"}\n        style={{ marginLeft: Spacing.small, width: 180 }}\n        disabled={props.disabled}>\n        {IS_DESKTOP ? props.token.name : props.token.symbol}\n    </Text>\n);\n\nexport default TokenName;\n","import useAsyncEffect from \"use-async-effect\";\n\nconst handles = {};\n\nconst useDelayedEffect = (\n    effect: (isMounted: () => boolean) => unknown | Promise<unknown>,\n    timeout: number,\n    inputs?: any[]\n) => {\n    const key = effect.toString();\n    useAsyncEffect<number>(\n        () => {\n            const handle = setTimeout(effect, timeout);\n            handles[key] = handle;\n            return handle;\n        },\n        handle => {\n            clearTimeout(handle);\n        },\n        inputs\n    );\n};\nexport default useDelayedEffect;\n","import React, { FC } from \"react\";\nimport { TextStyle } from \"react-native\";\n\nimport TokenWithValue from \"../types/TokenWithValue\";\nimport { formatUSD } from \"../utils\";\nimport Text from \"./Text\";\n\nexport interface TokenPriceProps {\n    token: TokenWithValue;\n    disabled?: boolean;\n    style?: TextStyle;\n}\n\nconst TokenPrice: FC<TokenPriceProps> = props => {\n    return (\n        <Text note={true} fontWeight={\"light\"} disabled={props.disabled} style={props.style}>\n            {formatUSD(props.token.priceUSD || 0, 4)}\n        </Text>\n    );\n};\n\nexport default TokenPrice;\n","import React, { FC } from \"react\";\nimport { TextStyle } from \"react-native\";\n\nimport TokenWithValue from \"../types/TokenWithValue\";\nimport { formatUSD } from \"../utils\";\nimport Text from \"./Text\";\n\nexport interface TokenValueProps {\n    token: TokenWithValue;\n    disabled?: boolean;\n    style?: TextStyle;\n}\n\nconst TokenValue: FC<TokenValueProps> = props => {\n    return (\n        <Text note={true} fontWeight={\"light\"} disabled={props.disabled} style={props.style}>\n            {formatUSD(props.token.valueUSD || 0, 4)}\n        </Text>\n    );\n};\n\nexport default TokenValue;\n","import React, { FC } from \"react\";\nimport { View } from \"react-native\";\n\nimport { Spacing } from \"../constants/dimension\";\nimport CloseIcon from \"./CloseIcon\";\nimport Expandable from \"./Expandable\";\nimport FlexView from \"./FlexView\";\nimport { ITEM_SEPARATOR_HEIGHT } from \"./ItemSeparator\";\nimport Selectable from \"./Selectable\";\nimport SelectIcon from \"./SelectIcon\";\nimport Text from \"./Text\";\n\nexport interface Option {\n    key: string;\n    title: string;\n    description: string;\n}\n\nexport interface SelectProps {\n    title: string;\n    options: Option[];\n    option?: Option;\n    setOption: (option?: Option) => void;\n}\n\nconst Select: FC<SelectProps> = props => {\n    return (\n        <View>\n            <Expandable title={props.title} expanded={!props.option} onExpand={() => props.setOption()}>\n                {props.options.map(option => (\n                    <Item\n                        key={option.key}\n                        option={option}\n                        setOption={props.setOption}\n                        selected={option.key === props.option?.key}\n                    />\n                ))}\n            </Expandable>\n            {props.option && (\n                <Item option={props.option} setOption={props.setOption} selected={true} selectable={false} />\n            )}\n        </View>\n    );\n};\n\nconst Item = (props: {\n    option: Option;\n    setOption?: (option?: Option) => void;\n    selected: boolean;\n    selectable?: boolean;\n}) => {\n    return (\n        <Selectable\n            containerStyle={{ marginBottom: ITEM_SEPARATOR_HEIGHT }}\n            style={{ paddingLeft: Spacing.small + Spacing.tiny, paddingRight: Spacing.small }}\n            selected={props.selected}\n            disabled={props.selectable}\n            onPress={() => props.setOption?.(props.selected ? undefined : props.option)}>\n            <FlexView style={{ alignItems: \"center\" }}>\n                <View style={{ flex: 1 }}>\n                    <Text fontWeight={\"regular\"}>{props.option.title}</Text>\n                    <Text note={true} style={{ marginTop: 4 }}>\n                        {props.option.description}\n                    </Text>\n                </View>\n                {props.selected ? <CloseIcon /> : <SelectIcon />}\n            </FlexView>\n        </Selectable>\n    );\n};\n\nexport default Select;\n","import React from \"react\";\n\nimport { TokenPairState } from \"../hooks/useTokenPairState\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Button from \"./Button\";\n\nconst UnsupportedButton = ({ state }: { state: TokenPairState }) => {\n    const t = useTranslation();\n    return <Button title={state.fromSymbol + \"-\" + state.toSymbol + \" \" + t(\"not-supported\")} disabled={true} />;\n};\n\nexport default UnsupportedButton;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.signERC2612Permit = exports.signDaiPermit = void 0;\nconst rpc_1 = require(\"./rpc\");\nconst lib_1 = require(\"./lib\");\nconst MAX_INT = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\nconst EIP712Domain = [\n    { name: \"name\", type: \"string\" },\n    { name: \"version\", type: \"string\" },\n    { name: \"chainId\", type: \"uint256\" },\n    { name: \"verifyingContract\", type: \"address\" },\n];\nconst createTypedDaiData = (message, domain) => {\n    const typedData = {\n        types: {\n            EIP712Domain,\n            Permit: [\n                { name: \"holder\", type: \"address\" },\n                { name: \"spender\", type: \"address\" },\n                { name: \"nonce\", type: \"uint256\" },\n                { name: \"expiry\", type: \"uint256\" },\n                { name: \"allowed\", type: \"bool\" },\n            ],\n        },\n        primaryType: \"Permit\",\n        domain,\n        message,\n    };\n    return typedData;\n};\nconst createTypedERC2612Data = (message, domain) => {\n    const typedData = {\n        types: {\n            EIP712Domain,\n            Permit: [\n                { name: \"owner\", type: \"address\" },\n                { name: \"spender\", type: \"address\" },\n                { name: \"value\", type: \"uint256\" },\n                { name: \"nonce\", type: \"uint256\" },\n                { name: \"deadline\", type: \"uint256\" },\n            ],\n        },\n        primaryType: \"Permit\",\n        domain,\n        message,\n    };\n    return typedData;\n};\nconst NONCES_FN = '0x7ecebe00';\nconst NAME_FN = '0x06fdde03';\nconst zeros = (numZeros) => ''.padEnd(numZeros, '0');\nconst getTokenName = (provider, address) => __awaiter(void 0, void 0, void 0, function* () { return lib_1.hexToUtf8((yield rpc_1.call(provider, address, NAME_FN)).substr(130)); });\nconst getDomain = (provider, token) => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof token !== 'string') {\n        return token;\n    }\n    const tokenAddress = token;\n    const [name, chainId] = yield Promise.all([\n        getTokenName(provider, tokenAddress),\n        rpc_1.getChainId(provider),\n    ]);\n    const domain = { name, version: '1', chainId, verifyingContract: tokenAddress };\n    return domain;\n});\nexports.signDaiPermit = (provider, token, holder, spender, expiry, nonce) => __awaiter(void 0, void 0, void 0, function* () {\n    const tokenAddress = token.verifyingContract || token;\n    const message = {\n        holder,\n        spender,\n        nonce: nonce || (yield rpc_1.call(provider, tokenAddress, `${NONCES_FN}${zeros(24)}${holder.substr(2)}`)),\n        expiry: expiry || MAX_INT,\n        allowed: true,\n    };\n    const domain = yield getDomain(provider, token);\n    const typedData = createTypedDaiData(message, domain);\n    const sig = yield rpc_1.signData(provider, holder, typedData);\n    return Object.assign(Object.assign({}, sig), message);\n});\nexports.signERC2612Permit = (provider, token, owner, spender, value = MAX_INT, deadline, nonce) => __awaiter(void 0, void 0, void 0, function* () {\n    const tokenAddress = token.verifyingContract || token;\n    const message = {\n        owner,\n        spender,\n        value,\n        nonce: nonce || (yield rpc_1.call(provider, tokenAddress, `${NONCES_FN}${zeros(24)}${owner.substr(2)}`)),\n        deadline: deadline || MAX_INT,\n    };\n    const domain = yield getDomain(provider, token);\n    const typedData = createTypedERC2612Data(message, domain);\n    const sig = yield rpc_1.signData(provider, owner, typedData);\n    return Object.assign(Object.assign({}, sig), message);\n});\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.call = exports.getChainId = exports.setChainIdOverride = exports.signData = exports.send = void 0;\nconst randomId = () => Math.floor(Math.random() * 10000000000);\nexports.send = (provider, method, params) => new Promise((resolve, reject) => {\n    const payload = {\n        id: randomId(),\n        method,\n        params,\n    };\n    const callback = (err, result) => {\n        if (err) {\n            reject(err);\n        }\n        else if (result.error) {\n            console.error(result.error);\n            reject(result.error);\n        }\n        else {\n            resolve(result.result);\n        }\n    };\n    let _provider = provider.provider || provider;\n    if (_provider.sendAsync) {\n        _provider.sendAsync(payload, callback);\n    }\n    else {\n        _provider.send(payload, callback);\n    }\n});\nexports.signData = (provider, fromAddress, typeData) => __awaiter(void 0, void 0, void 0, function* () {\n    const typeDataString = typeof typeData === 'string' ? typeData : JSON.stringify(typeData);\n    const result = yield exports.send(provider, 'eth_signTypedData_v4', [fromAddress, typeDataString])\n        .catch((error) => {\n        if (error.message === 'Method eth_signTypedData_v4 not supported.') {\n            return exports.send(provider, 'eth_signTypedData', [fromAddress, typeData]);\n        }\n        else {\n            throw error;\n        }\n    });\n    return {\n        r: result.slice(0, 66),\n        s: '0x' + result.slice(66, 130),\n        v: parseInt(result.slice(130, 132), 16),\n    };\n});\nlet chainIdOverride = null;\nexports.setChainIdOverride = (id) => { chainIdOverride = id; };\nexports.getChainId = (provider) => __awaiter(void 0, void 0, void 0, function* () { return chainIdOverride || exports.send(provider, 'eth_chainId'); });\nexports.call = (provider, to, data) => exports.send(provider, 'eth_call', [{\n        to,\n        data,\n    }, 'latest']);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hexToUtf8 = void 0;\nconst utf8_1 = __importDefault(require(\"utf8\"));\nexports.hexToUtf8 = function (hex) {\n    // if (!isHexStrict(hex))\n    //     throw new Error('The parameter \"'+ hex +'\" must be a valid HEX string.');\n    let str = \"\";\n    let code = 0;\n    hex = hex.replace(/^0x/i, '');\n    // remove 00 padding from either side\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    hex = hex.replace(/^(?:00)*/, '');\n    hex = hex.split(\"\").reverse().join(\"\");\n    let l = hex.length;\n    for (let i = 0; i < l; i += 2) {\n        code = parseInt(hex.substr(i, 2), 16);\n        // if (code !== 0) {\n        str += String.fromCharCode(code);\n        // }\n    }\n    return utf8_1.default.decode(str);\n};\n","/*! https://mths.be/utf8js v3.0.0 by @mathias */\n;(function(root) {\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\troot.version = '3.0.0';\n\troot.encode = utf8encode;\n\troot.decode = utf8decode;\n\n}(typeof exports === 'undefined' ? this.utf8 = {} : exports));\n","import React, { FC, useCallback, useContext, useEffect, useState } from \"react\";\nimport { ActivityIndicator, View } from \"react-native\";\n\nimport { ethers } from \"ethers\";\nimport { IS_DESKTOP, Spacing } from \"../constants/dimension\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useColors from \"../hooks/useColors\";\nimport useDelayedEffect from \"../hooks/useDelayedEffect\";\nimport useStyles from \"../hooks/useStyles\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport Token from \"../types/Token\";\nimport { findOrFetchToken } from \"../utils/fetch-utils\";\nimport Button from \"./Button\";\nimport FlexView from \"./FlexView\";\nimport Input from \"./Input\";\nimport { ITEM_SEPARATOR_HEIGHT } from \"./ItemSeparator\";\nimport Selectable from \"./Selectable\";\nimport TokenLogo from \"./TokenLogo\";\nimport TokenName from \"./TokenName\";\n\nexport interface TokenSearchProps {\n    tokens?: Token[];\n    text: string;\n    onChangeText: (text: string) => void;\n    onAddToken?: (token: Token) => void;\n}\n\n// tslint:disable-next-line:max-func-body-length\nconst TokenSearch: FC<TokenSearchProps> = props => {\n    const t = useTranslation();\n    const { border } = useStyles();\n    const { provider, tokens } = useContext(EthersContext);\n    const [tokenToAdd, setTokenToAdd] = useState<Token>();\n    const [loading, setLoading] = useState(false);\n    const duplicate = !!tokenToAdd && tokens.findIndex(tk => tk.address === tokenToAdd.address) !== -1;\n    if (!props.tokens) return <View />;\n    useEffect(() => {\n        if (props.text === \"\") {\n            setLoading(false);\n            setTokenToAdd(undefined);\n        }\n    }, [props.text]);\n    useDelayedEffect(\n        async () => {\n            const address = props.text.trim();\n            if (provider && ethers.utils.isAddress(address)) {\n                setLoading(true);\n                try {\n                    const token = await findOrFetchToken(address, provider);\n                    if (token.name && token.symbol && token.decimals) {\n                        setTokenToAdd(token as Token);\n                    }\n                } finally {\n                    setLoading(false);\n                }\n            }\n        },\n        300,\n        [provider, props.text]\n    );\n    return (\n        <View>\n            <FlexView style={{ marginBottom: Spacing.small }}>\n                <Input\n                    value={props.text}\n                    onChangeText={props.onChangeText}\n                    placeholder={t(\"token-name-symbol-or-address\")}\n                    autoFocus={IS_DESKTOP}\n                    inputStyle={{ marginHorizontal: Spacing.tiny, fontSize: props.text ? 20 : 16 }}\n                    inputContainerStyle={{ borderBottomWidth: 0, marginRight: loading ? 32 : 0 }}\n                    labelStyle={{ height: 0 }}\n                    containerStyle={{\n                        ...border(),\n                        paddingHorizontal: Spacing.tiny,\n                        paddingTop: 12,\n                        paddingBottom: 0\n                    }}\n                />\n                {props.onAddToken && loading && <Loading />}\n            </FlexView>\n            {props.onAddToken && tokenToAdd && (\n                <TokenItem token={tokenToAdd} selected={true} onSelectToken={props.onAddToken} duplicate={duplicate} />\n            )}\n        </View>\n    );\n};\n\nconst Loading = () => <ActivityIndicator size={\"small\"} style={{ position: \"absolute\", right: 16, bottom: 16 }} />;\n\nconst TokenItem = (props: {\n    token: Token;\n    selected: boolean;\n    onSelectToken: (token: Token) => void;\n    duplicate: boolean;\n}) => {\n    const t = useTranslation();\n    const { accent } = useColors();\n    const onPress = useCallback(() => {\n        props.onSelectToken(props.token);\n    }, [props.onSelectToken, props.token]);\n    return (\n        <Selectable\n            selected={false}\n            disabled={true}\n            onPress={onPress}\n            containerStyle={{\n                marginBottom: ITEM_SEPARATOR_HEIGHT\n            }}>\n            <FlexView style={{ alignItems: \"center\" }}>\n                <TokenLogo token={props.token} />\n                <TokenName token={props.token} />\n                <View style={{ flex: 1 }} />\n                <Button\n                    type={\"clear\"}\n                    size={\"small\"}\n                    color={accent}\n                    title={props.duplicate ? t(\"already-added\") : t(\"-add-\") + \" \" + props.token.symbol}\n                    fontWeight={\"bold\"}\n                    onPress={onPress}\n                    disabled={props.duplicate}\n                    buttonStyle={{ paddingHorizontal: 4, height: 27 }}\n                />\n            </FlexView>\n        </Selectable>\n    );\n};\n\nexport default TokenSearch;\n","import React, { FC, useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport { FlatList, View, ViewStyle } from \"react-native\";\n\nimport { IS_DESKTOP, Spacing } from \"../constants/dimension\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useDelayedEffect from \"../hooks/useDelayedEffect\";\nimport Token from \"../types/Token\";\nimport TokenWithValue from \"../types/TokenWithValue\";\nimport CloseIcon from \"./CloseIcon\";\nimport Expandable from \"./Expandable\";\nimport FlexView from \"./FlexView\";\nimport { ITEM_SEPARATOR_HEIGHT } from \"./ItemSeparator\";\nimport Loading from \"./Loading\";\nimport Selectable from \"./Selectable\";\nimport SelectIcon from \"./SelectIcon\";\nimport Text from \"./Text\";\nimport TokenAmount from \"./TokenAmount\";\nimport TokenLogo from \"./TokenLogo\";\nimport TokenName from \"./TokenName\";\nimport TokenPrice from \"./TokenPrice\";\nimport TokenSearch from \"./TokenSearch\";\nimport TokenSymbol from \"./TokenSymbol\";\nimport TokenValue from \"./TokenValue\";\n\nexport interface TokenSelectProps {\n    title: string;\n    symbol: string;\n    onChangeSymbol: (symbol: string) => void;\n    disabled?: (token: Token) => boolean;\n    hidden?: (token: Token) => boolean;\n    style?: ViewStyle;\n}\n\nconst TokenSelect: FC<TokenSelectProps> = props => {\n    const { tokens, addCustomToken } = useContext(EthersContext);\n    const [search, setSearch] = useState(\"\");\n    const [query, setQuery] = useState(\"\");\n    const token = useMemo(() => tokens.find(t => t.symbol === props.symbol), [tokens, props.symbol]);\n    const onSelectToken = t => props.onChangeSymbol(t.symbol);\n    const onUnselectToken = () => props.onChangeSymbol(\"\");\n    const onAddToken = async (t: Token) => {\n        await addCustomToken(t);\n        setSearch(\"\");\n        setQuery(\"\");\n        props.onChangeSymbol(t.symbol);\n    };\n    const hidden = (t: Token) => {\n        if (query.length > 0) {\n            return !t.symbol.toLowerCase().includes(query) && !t.name.toLowerCase().includes(query);\n        }\n        return props.hidden?.(t) || false;\n    };\n    useEffect(() => setSearch(\"\"), [props.symbol]);\n    useDelayedEffect(() => setQuery(search.trim().toLowerCase()), 300, [search]);\n    return (\n        <View style={props.style}>\n            <Expandable title={props.title} expanded={!props.symbol} onExpand={() => props.onChangeSymbol(\"\")}>\n                <TokenSearch text={search} onChangeText={setSearch} tokens={tokens} onAddToken={onAddToken} />\n                <TokenList disabled={props.disabled} hidden={hidden} onSelectToken={onSelectToken} />\n            </Expandable>\n            {token && <TokenItem token={token} selected={true} onSelectToken={onUnselectToken} selectable={true} />}\n        </View>\n    );\n};\n\nconst TokenList = (props: {\n    onSelectToken: (token: Token) => void;\n    disabled?: (token: Token) => boolean;\n    hidden?: (token: Token) => boolean;\n}) => {\n    const { loadingTokens, tokens } = useContext(EthersContext);\n    const renderItem = useCallback(\n        ({ item }) => {\n            return (\n                <TokenItem\n                    key={item.address}\n                    token={item}\n                    selected={false}\n                    onSelectToken={props.onSelectToken}\n                    disabled={props.disabled?.(item)}\n                />\n            );\n        },\n        [props.onSelectToken, props.disabled]\n    );\n    const data = useMemo(\n        () => tokens.filter(token => (props.hidden ? !props.hidden(token) : true)).sort(compareTokens),\n        [tokens, props.hidden]\n    );\n    return loadingTokens ? (\n        <Loading />\n    ) : data.length === 0 ? (\n        <EmptyList />\n    ) : (\n        <FlatList keyExtractor={item => item.address} data={data} renderItem={renderItem} />\n    );\n};\n\nconst EmptyList = () => {\n    return (\n        <View style={{ margin: Spacing.normal }}>\n            <Text disabled={true} style={{ textAlign: \"center\", width: \"100%\" }}>\n                {\"You don't have any matching tokens.\"}\n            </Text>\n        </View>\n    );\n};\n\n// tslint:disable-next-line:max-func-body-length\nconst TokenItem = (props: {\n    token: TokenWithValue;\n    selected: boolean;\n    onSelectToken: (token: Token) => void;\n    disabled?: boolean;\n    selectable?: boolean;\n}) => {\n    const onPress = useCallback(() => {\n        props.onSelectToken(props.token);\n    }, [props.onSelectToken, props.token]);\n    return (\n        <Selectable\n            selected={props.selected}\n            onPress={onPress}\n            disabled={props.disabled || props.selectable}\n            containerStyle={{\n                marginBottom: ITEM_SEPARATOR_HEIGHT\n            }}>\n            <FlexView style={{ alignItems: \"center\" }}>\n                <TokenLogo token={props.token} disabled={props.disabled} />\n                <View>\n                    {props.token.priceUSD !== null && (\n                        <TokenPrice\n                            token={props.token}\n                            disabled={props.disabled}\n                            style={{ marginLeft: Spacing.small }}\n                        />\n                    )}\n                    <TokenName token={props.token} disabled={props.disabled} />\n                </View>\n                <View style={{ flex: 1, alignItems: \"flex-end\" }}>\n                    {props.token.valueUSD !== null && <TokenValue token={props.token} disabled={props.disabled} />}\n                    <FlexView>\n                        <TokenAmount\n                            token={props.token}\n                            disabled={props.disabled}\n                            style={{ flex: 1, textAlign: \"right\" }}\n                        />\n                        {IS_DESKTOP && <TokenSymbol token={props.token} disabled={props.disabled} />}\n                    </FlexView>\n                </View>\n                {props.selected ? <CloseIcon /> : <SelectIcon />}\n            </FlexView>\n        </Selectable>\n    );\n};\n\nconst compareTokens = (t1: TokenWithValue, t2: TokenWithValue) => {\n    if (t2.balance.isZero() && t1.balance.isZero()) return (t2?.priceUSD || 0) - (t1?.priceUSD || 0);\n    const value2 = t2?.valueUSD || 0;\n    const value1 = t1?.valueUSD || 1;\n    if (value2 === value1) {\n        return (\n            (t2.balance.isZero() ? 0 : 10000000000) -\n            (t1.balance.isZero() ? 0 : 10000000000) +\n            t1.symbol.localeCompare(t2.symbol)\n        );\n    }\n    return value2 - value1;\n};\n\nexport default TokenSelect;\n","import { useCallback, useContext } from \"react\";\n\nimport { Percent, Router, TokenAmount } from \"@sushiswap/sdk\";\nimport { signERC2612Permit } from \"eth-permit\";\nimport { ethers } from \"ethers\";\nimport { ROUTER, ZAP_IN, ZAP_OUT } from \"../constants/contracts\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport LPToken from \"../types/LPToken\";\nimport Token from \"../types/Token\";\nimport { convertToken, deduct, getContract, isETH, parseCurrencyAmount } from \"../utils\";\nimport { logTransaction } from \"../utils/analytics-utils\";\nimport useSDK from \"./useSDK\";\nimport useSwapRouter from \"./useSwapRouter\";\n\n// tslint:disable-next-line:max-func-body-length\nconst useZapper = () => {\n    const { ethereum } = useContext(EthersContext);\n    const { getPair, getTrade, calculateAmountOfLPTokenMinted } = useSDK();\n    const { allowedSlippage, ttl } = useSwapRouter();\n    const zapSlippage = new Percent(\"3\", \"100\"); // 3.0%\n\n    const populateSwapData = async (\n        fromToken: Token,\n        toToken: Token,\n        amount: ethers.BigNumber,\n        provider: ethers.providers.BaseProvider,\n        signer: ethers.Signer\n    ) => {\n        const trade = await getTrade(fromToken, toToken, amount, provider);\n        if (!trade) throw new Error(\"Cannot find trade\");\n        const params = Router.swapCallParameters(trade, {\n            feeOnTransfer: false,\n            allowedSlippage,\n            recipient: ZAP_IN,\n            ttl\n        });\n        const router = getContract(\"IUniswapV2Router02\", ROUTER, signer);\n        const tx = await router.populateTransaction[params.methodName](...params.args, { value: params.value });\n        return tx.data || \"\";\n    };\n\n    const zapIn = useCallback(\n        async (\n            fromToken: Token,\n            toToken: Token,\n            fromAmount: ethers.BigNumber,\n            provider: ethers.providers.BaseProvider,\n            signer: ethers.Signer\n        ) => {\n            const pair = await getPair(fromToken, toToken, provider);\n            const amount = new TokenAmount(convertToken(fromToken), fromAmount.div(2).toString());\n            const lpTokenAmount = await calculateAmountOfLPTokenMinted(pair, amount, pair.getOutputAmount(amount)[0]);\n            if (!lpTokenAmount) throw new Error(\"Cannot calculate LP token amount\");\n            const contract = getContract(\"ZapIn\", ZAP_IN, signer);\n            const args = [\n                fromToken.address,\n                pair.liquidityToken.address,\n                fromAmount,\n                deduct(lpTokenAmount, zapSlippage),\n                ROUTER,\n                ROUTER,\n                await populateSwapData(fromToken, toToken, fromAmount.div(2), provider, signer)\n            ];\n            const value = isETH(fromToken) ? fromAmount : ethers.constants.Zero;\n            const gasLimit = await contract.estimateGas.ZapIn(...args, { value });\n            const tx = await contract.ZapIn(...args, {\n                value,\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"ZapIn_General_V2.ZapIn()\", ...args.map(arg => arg.toString()));\n        },\n        [populateSwapData]\n    );\n\n    const getZapOutSwappedAmount = async (\n        outputToken: Token,\n        lpToken: LPToken,\n        lpTokenAmount: ethers.BigNumber,\n        provider: ethers.providers.BaseProvider\n    ) => {\n        let fromToken: Token;\n        let toToken: Token;\n        if (outputToken === lpToken.tokenA) {\n            fromToken = lpToken.tokenB;\n            toToken = lpToken.tokenA;\n        } else if (outputToken === lpToken.tokenB) {\n            fromToken = lpToken.tokenA;\n            toToken = lpToken.tokenB;\n        } else {\n            throw new Error(\"Wrong outputToken\");\n        }\n        const pair = await getPair(fromToken, toToken, provider);\n        const fromReserve = parseCurrencyAmount(pair.reserveOf(convertToken(fromToken)), fromToken.decimals);\n        const fromAmount = lpTokenAmount.mul(fromReserve).div(lpToken.totalSupply);\n        const trade = await getTrade(fromToken, toToken, fromAmount, provider);\n        if (!trade) throw new Error(\"Cannot find trade\");\n        return parseCurrencyAmount(trade.outputAmount);\n    };\n\n    const zapOut = useCallback(\n        // tslint:disable-next-line:max-func-body-length\n        async (\n            lpToken: LPToken,\n            outputToken: Token,\n            amount: ethers.BigNumber,\n            provider: ethers.providers.BaseProvider,\n            signer: ethers.Signer\n        ) => {\n            const contract = getContract(\"ZapOut\", ZAP_OUT, signer);\n            const deadline = Math.floor(new Date().getTime() / 1000) + ttl;\n            const permit = await signERC2612Permit(\n                ethereum,\n                lpToken.address,\n                await signer.getAddress(),\n                ZAP_OUT,\n                amount.toString(),\n                deadline\n            );\n            const args = [\n                outputToken.address,\n                lpToken.address,\n                amount,\n                deduct(await getZapOutSwappedAmount(outputToken, lpToken, amount, provider), zapSlippage),\n                amount,\n                deadline,\n                permit.v,\n                permit.r,\n                permit.s\n            ];\n            const gasLimit = await contract.estimateGas.ZapOutWithPermit(...args);\n            const tx = await contract.ZapOutWithPermit(...args, {\n                gasLimit: gasLimit.mul(120).div(100)\n            });\n            return logTransaction(tx, \"ZapOut_General_V1.ZapOutWithPermit()\", ...args.map(arg => arg.toString()));\n        },\n        [getZapOutSwappedAmount]\n    );\n\n    return {\n        zapIn,\n        zapOut,\n        getZapOutSwappedAmount\n    };\n};\n\nexport default useZapper;\n","import { useCallback, useContext, useEffect, useState } from \"react\";\n\nimport { Pair } from \"@sushiswap/sdk\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport { convertToken, isETH, parseBalance } from \"../utils\";\nimport useDelayedOnBlockEffect from \"./useDelayedOnBlockEffect\";\nimport useSDK from \"./useSDK\";\nimport useSwapRouter from \"./useSwapRouter\";\nimport useTokenPairState, { TokenPairState } from \"./useTokenPairState\";\nimport useZapper from \"./useZapper\";\n\nexport type AddLiquidityMode = \"normal\" | \"zapper\";\n\nexport interface AddLiquidityState extends TokenPairState {\n    mode?: AddLiquidityMode;\n    setMode: (mode?: AddLiquidityMode) => void;\n    pair?: Pair;\n    priceDetermined: boolean;\n    onAdd: () => Promise<void>;\n    adding: boolean;\n}\n\n// tslint:disable-next-line:max-func-body-length\nconst useAddLiquidityState: () => AddLiquidityState = () => {\n    const state = useTokenPairState();\n    const { provider, signer, updateTokens } = useContext(EthersContext);\n    const [loading, setLoading] = useState(false);\n    const [mode, setMode] = useState<AddLiquidityMode>();\n    const [pair, setPair] = useState<Pair>();\n    const [adding, setAdding] = useState(false);\n    const { getPair } = useSDK();\n    const { addLiquidity, addLiquidityETH } = useSwapRouter();\n    const { zapIn } = useZapper();\n    const priceDetermined =\n        !!pair &&\n        !!state.toToken &&\n        !pair\n            .priceOf(convertToken(state.toToken))\n            .denominator.toString()\n            .startsWith(\"0\");\n\n    useEffect(() => {\n        setPair(undefined);\n        state.setFromSymbol(\"\");\n    }, [mode]);\n\n    useDelayedOnBlockEffect(\n        async block => {\n            if (!block) {\n                setLoading(true);\n                setPair(undefined);\n            }\n            if (state.fromToken && state.toToken && provider) {\n                try {\n                    setPair(await getPair(state.fromToken, state.toToken, provider));\n                } catch (e) {\n                } finally {\n                    setLoading(false);\n                }\n            } else {\n                setLoading(false);\n            }\n        },\n        () => \"getPair(\" + state.fromSymbol + \",\" + state.toSymbol + \")\",\n        [state.fromSymbol, state.toSymbol, provider],\n        0\n    );\n\n    const onAdd = useCallback(async () => {\n        if (state.fromToken && state.toToken && state.fromAmount && state.toAmount && provider && signer) {\n            setAdding(true);\n            try {\n                const fromAmount = parseBalance(state.fromAmount, state.fromToken.decimals);\n                const toAmount = parseBalance(state.toAmount, state.toToken.decimals);\n                if (mode === \"zapper\") {\n                    const tx = await zapIn(state.fromToken, state.toToken, fromAmount, provider, signer);\n                    await tx.wait();\n                } else if (isETH(state.fromToken) || isETH(state.toToken)) {\n                    const [token, amount, amountETH] = isETH(state.fromToken)\n                        ? [state.toToken, toAmount, fromAmount]\n                        : [state.fromToken, fromAmount, toAmount];\n                    const tx = await addLiquidityETH(token, amount, amountETH, signer);\n                    await tx.wait();\n                } else {\n                    const tx = await addLiquidity(state.fromToken, state.toToken, fromAmount, toAmount, signer);\n                    await tx.wait();\n                }\n                await updateTokens();\n                state.setFromSymbol(\"\");\n            } finally {\n                setAdding(false);\n            }\n        }\n    }, [state.fromToken, state.toToken, state.fromAmount, state.toAmount, provider, signer]);\n\n    return {\n        ...state,\n        loading: loading || state.loading,\n        mode,\n        setMode,\n        pair,\n        priceDetermined,\n        onAdd,\n        adding\n    };\n};\n\nexport default useAddLiquidityState;\n","import React, { useCallback, useContext, useState } from \"react\";\nimport { Platform, View } from \"react-native\";\n\nimport { TokenAmount } from \"@sushiswap/sdk\";\nimport { ethers } from \"ethers\";\nimport useAsyncEffect from \"use-async-effect\";\nimport AmountMeta from \"../components/AmountMeta\";\nimport ApproveButton from \"../components/ApproveButton\";\nimport BackgroundImage from \"../components/BackgroundImage\";\nimport Border from \"../components/Border\";\nimport Button from \"../components/Button\";\nimport Container from \"../components/Container\";\nimport Content from \"../components/Content\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport FetchingButton from \"../components/FetchingButton\";\nimport Heading from \"../components/Heading\";\nimport InfoBox from \"../components/InfoBox\";\nimport InsufficientBalanceButton from \"../components/InsufficientBalanceButton\";\nimport ItemSeparator from \"../components/ItemSeparator\";\nimport Meta from \"../components/Meta\";\nimport Notice from \"../components/Notice\";\nimport Select, { Option } from \"../components/Select\";\nimport Text from \"../components/Text\";\nimport Title from \"../components/Title\";\nimport TokenInput from \"../components/TokenInput\";\nimport TokenSelect from \"../components/TokenSelect\";\nimport UnsupportedButton from \"../components/UnsupportedButton\";\nimport WebFooter from \"../components/web/WebFooter\";\nimport { LiquiditySubMenu } from \"../components/web/WebSubMenu\";\nimport { ROUTER, ZAP_IN } from \"../constants/contracts\";\nimport { Spacing } from \"../constants/dimension\";\nimport Fraction from \"../constants/Fraction\";\nimport { EthersContext } from \"../context/EthersContext\";\nimport useAddLiquidityState, { AddLiquidityMode, AddLiquidityState } from \"../hooks/useAddLiquidityState\";\nimport useColors from \"../hooks/useColors\";\nimport useLinker from \"../hooks/useLinker\";\nimport useSDK from \"../hooks/useSDK\";\nimport useTranslation from \"../hooks/useTranslation\";\nimport MetamaskError from \"../types/MetamaskError\";\nimport Token from \"../types/Token\";\nimport { convertAmount, convertToken, formatBalance, isEmptyValue, isETH, isETHWETHPair, parseBalance } from \"../utils\";\nimport Screen from \"./Screen\";\n\nconst LiquidityScreen = () => {\n    const t = useTranslation();\n    return (\n        <Screen>\n            <Container>\n                <BackgroundImage />\n                <Content>\n                    <Title text={t(\"add-liquidity\")} />\n                    <Text light={true}>{t(\"add-liquidity-desc\")}</Text>\n                    <AddLiquidity />\n                </Content>\n                {Platform.OS === \"web\" && <WebFooter />}\n            </Container>\n            <LiquiditySubMenu />\n        </Screen>\n    );\n};\n\nconst AddLiquidity = () => {\n    const state = useAddLiquidityState();\n    return (\n        <View style={{ marginTop: Spacing.large }}>\n            <ModeSelect state={state} />\n            <Border />\n            <FromTokenSelect state={state} />\n            <Border />\n            <ToTokenSelect state={state} />\n            <Border />\n            <FromTokenInput state={state} />\n            {state.mode === \"zapper\" ? (\n                <ZapNotice state={state} />\n            ) : (\n                <>\n                    <ItemSeparator />\n                    <ToTokenInput state={state} />\n                </>\n            )}\n            <PriceInfo state={state} />\n        </View>\n    );\n};\n\nconst ModeSelect = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    const options: Option[] = [\n        {\n            key: \"zapper\",\n            title: t(\"1-click-zap\"),\n            description: t(\"1-click-zap-desc\")\n        },\n        { key: \"normal\", title: t(\"normal\"), description: t(\"normal-desc\") }\n    ];\n    return (\n        <Select\n            title={t(\"mode\")}\n            options={options}\n            option={options.find(option => option.key === state.mode)}\n            setOption={option => state.setMode(option?.key as AddLiquidityMode | undefined)}\n        />\n    );\n};\n\nconst FromTokenSelect = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    const { customTokens } = useContext(EthersContext);\n    if (!state.mode) {\n        return <Heading text={t(\"1st-token\")} disabled={true} />;\n    }\n    return (\n        <TokenSelect\n            title={t(\"1st-token\")}\n            symbol={state.fromSymbol}\n            onChangeSymbol={state.setFromSymbol}\n            hidden={token => !customTokens.find(tk => tk.address === token.address) && token.balance.isZero()}\n        />\n    );\n};\n\nconst ToTokenSelect = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    const { customTokens } = useContext(EthersContext);\n    if (!state.fromSymbol) {\n        return <Heading text={t(\"2nd-token\")} disabled={true} />;\n    }\n    return (\n        <View>\n            <TokenSelect\n                title={t(\"2nd-token\")}\n                symbol={state.toSymbol}\n                onChangeSymbol={state.setToSymbol}\n                hidden={token =>\n                    token.symbol === state.fromSymbol ||\n                    (!customTokens.find(tk => tk.address === token.address) && token.balance.isZero())\n                }\n            />\n        </View>\n    );\n};\n\nconst FromTokenInput = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    if (!state.fromSymbol || !state.toSymbol) {\n        return <Heading text={t(\"amount-of-tokens\")} disabled={true} />;\n    }\n    const onAmountChanged = (newAmount: string) => {\n        state.setFromAmount(newAmount);\n        if (state.pair && state.fromToken && state.priceDetermined) {\n            const fromPrice = state.pair.priceOf(convertToken(state.fromToken));\n            const toAmount = fromPrice.quote(convertAmount(state.fromToken, newAmount)).toExact();\n            state.setToAmount(isEmptyValue(toAmount) ? \"\" : toAmount);\n        }\n    };\n    return (\n        <TokenInput\n            title={state.mode === \"zapper\" ? t(\"amount-of-\", { symbol: state.fromSymbol }) : t(\"amount-of-tokens\")}\n            token={state.fromToken}\n            amount={state.fromAmount}\n            onAmountChanged={onAmountChanged}\n            hideMaxButton={state.loading && !state.pair}\n        />\n    );\n};\n\nconst ToTokenInput = ({ state }: { state: AddLiquidityState }) => {\n    if (!state.fromSymbol || !state.toSymbol) return <View />;\n    const onAmountChanged = (newAmount: string) => {\n        state.setToAmount(newAmount);\n        if (state.pair && state.toToken && state.priceDetermined) {\n            const toPrice = state.pair.priceOf(convertToken(state.toToken));\n            const fromAmount = toPrice.quote(convertAmount(state.toToken, newAmount)).toExact();\n            state.setFromAmount(isEmptyValue(fromAmount) ? \"\" : fromAmount);\n        }\n    };\n    return (\n        <TokenInput\n            token={state.toToken}\n            amount={state.toAmount}\n            onAmountChanged={onAmountChanged}\n            hideMaxButton={state.loading && !state.pair}\n        />\n    );\n};\n\nconst ZapNotice = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    if (!state.fromSymbol || !state.toSymbol || !state.pair) return <View />;\n    return (\n        <Notice\n            clear={true}\n            text={t(\"zap-notice\", { fromSymbol: state.fromSymbol, toSymbol: state.toSymbol })}\n            style={{ marginTop: Spacing.small }}\n        />\n    );\n};\n\nconst PriceInfo = ({ state }: { state: AddLiquidityState }) => {\n    if (state.fromToken && state.toToken && !state.loading && (!state.pair || !state.priceDetermined)) {\n        return <FirstProviderInfo state={state} />;\n    } else {\n        return <PairPriceInfo state={state} />;\n    }\n};\n\nconst FirstProviderInfo = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    const { red, green } = useColors();\n    const noAmount = isEmptyValue(state.fromAmount) || isEmptyValue(state.toAmount);\n    const initialPrice = Fraction.from(\n        parseBalance(state.toAmount, state.toToken!.decimals),\n        parseBalance(state.fromAmount, state.fromToken!.decimals)\n    ).toString(8);\n    const zap = state.mode === \"zapper\";\n    return (\n        <View>\n            {!zap && (\n                <InfoBox style={{ marginTop: Spacing.normal }}>\n                    <PriceMeta state={state} price={initialPrice} disabled={noAmount} />\n                    <FirstProviderControls state={state} />\n                </InfoBox>\n            )}\n            {!isETHWETHPair(state.fromToken, state.toToken) && (\n                <Notice\n                    text={\n                        t(\"first-provider-desc-1\") + (zap ? t(\"first-provider-desc-zap\") : t(\"first-provider-desc-2\"))\n                    }\n                    color={zap ? red : green}\n                    style={{ marginTop: Spacing.small }}\n                />\n            )}\n        </View>\n    );\n};\n\n// tslint:disable-next-line:max-func-body-length\nconst FirstProviderControls = ({ state }: { state: AddLiquidityState }) => {\n    const [error, setError] = useState<MetamaskError>({});\n    useAsyncEffect(() => setError({}), [state.fromSymbol, state.toSymbol, state.fromAmount]);\n    const fromApproveRequired = !isETH(state.fromToken) && !state.fromTokenAllowed;\n    const toApproveRequired = !isETH(state.toToken) && !state.toTokenAllowed;\n    const disabled =\n        fromApproveRequired || isEmptyValue(state.fromAmount) || toApproveRequired || isEmptyValue(state.toAmount);\n    return (\n        <View style={{ marginTop: Spacing.normal }}>\n            {isETHWETHPair(state.fromToken, state.toToken) ? (\n                <UnsupportedButton state={state} />\n            ) : !state.fromToken || !state.toToken || isEmptyValue(state.fromAmount) || isEmptyValue(state.toAmount) ? (\n                <SupplyButton state={state} onError={setError} disabled={true} />\n            ) : state.loading ? (\n                <FetchingButton />\n            ) : parseBalance(state.fromAmount, state.fromToken.decimals).gt(state.fromToken.balance) ? (\n                <InsufficientBalanceButton symbol={state.fromSymbol} />\n            ) : parseBalance(state.toAmount, state.toToken.decimals).gt(state.toToken.balance) ? (\n                <InsufficientBalanceButton symbol={state.toSymbol} />\n            ) : (\n                <>\n                    <ApproveButton\n                        token={state.fromToken}\n                        spender={ROUTER}\n                        onSuccess={() => state.setFromTokenAllowed(true)}\n                        onError={setError}\n                        hidden={!fromApproveRequired}\n                    />\n                    <ApproveButton\n                        token={state.toToken}\n                        spender={ROUTER}\n                        onSuccess={() => state.setToTokenAllowed(true)}\n                        onError={setError}\n                        hidden={!toApproveRequired}\n                    />\n                    <SupplyButton state={state} onError={setError} disabled={disabled} />\n                </>\n            )}\n            {error.message && error.code !== 4001 && <ErrorMessage error={error} />}\n        </View>\n    );\n};\n\nconst PairPriceInfo = ({ state }: { state: AddLiquidityState }) => {\n    const t = useTranslation();\n    const { fromAmount, toAmount, lpTokenAmount } = useAmountCalculator(state);\n    const disabled = isEmptyValue(state.fromAmount) || isEmptyValue(state.toAmount);\n    const price =\n        state.pair && state.fromToken && state.priceDetermined\n            ? state.pair.priceOf(convertToken(state.fromToken)).toFixed(8)\n            : undefined;\n    const symbol = state.fromSymbol + \"-\" + state.toSymbol;\n    return (\n        <InfoBox>\n            <AmountMeta amount={lpTokenAmount} suffix={symbol} disabled={disabled} />\n            <Meta text={fromAmount?.toFixed()} label={state.fromSymbol || t(\"1st-token\")} disabled={disabled} />\n            <Meta text={toAmount?.toFixed()} label={state.toSymbol || t(\"2nd-token\")} disabled={disabled} />\n            <PriceMeta state={state} price={price} disabled={!state.fromSymbol || !state.toSymbol} />\n            <Controls state={state} />\n        </InfoBox>\n    );\n};\n\nconst useAmountCalculator = (state: AddLiquidityState) => {\n    const [amount, setAmount] = useState<string>();\n    const [fromAmount, setFromAmount] = useState<TokenAmount>();\n    const [toAmount, setToAmount] = useState<TokenAmount>();\n    const { calculateAmountOfLPTokenMinted } = useSDK();\n    useAsyncEffect(async () => {\n        if (\n            state.fromToken &&\n            state.toToken &&\n            state.pair &&\n            !isEmptyValue(state.fromAmount) &&\n            !isEmptyValue(state.toAmount)\n        ) {\n            const from = new TokenAmount(\n                convertToken(state.fromToken),\n                parseBalance(state.fromAmount, state.fromToken.decimals)\n                    .div(state.mode === \"zapper\" ? 2 : 1)\n                    .toString()\n            );\n            setFromAmount(from);\n            const to =\n                state.mode === \"zapper\"\n                    ? state.pair.getOutputAmount(from)[0]\n                    : convertAmount(state.toToken, state.toAmount);\n            setToAmount(to);\n            const minted = await calculateAmountOfLPTokenMinted(state.pair, from, to);\n            setAmount(minted ? formatBalance(minted, state.pair.liquidityToken.decimals) : undefined);\n        }\n    }, [state.pair, state.fromAmount, state.toAmount]);\n    return { fromAmount, toAmount, lpTokenAmount: amount };\n};\n\nconst PriceMeta = ({ state, price, disabled }) => {\n    const t = useTranslation();\n    return (\n        <Meta\n            label={t(\"ratio\")}\n            text={price}\n            suffix={state.toSymbol + \" = 1 \" + state.fromSymbol}\n            disabled={disabled}\n        />\n    );\n};\n\n// tslint:disable-next-line:max-func-body-length\nconst Controls = ({ state }: { state: AddLiquidityState }) => {\n    const [error, setError] = useState<MetamaskError>({});\n    const { allowed, setAllowed, loading } = useZapTokenAllowance(state.fromToken);\n    useAsyncEffect(() => setError({}), [state.fromSymbol, state.toSymbol, state.fromAmount]);\n    const zap = state.mode === \"zapper\";\n    const fromApproveRequired = !isETH(state.fromToken) && ((zap && !allowed) || (!zap && !state.fromTokenAllowed));\n    const toApproveRequired = !isETH(state.toToken) && !zap && !state.toTokenAllowed;\n    const disabled =\n        fromApproveRequired ||\n        isEmptyValue(state.fromAmount) ||\n        (!zap && (toApproveRequired || isEmptyValue(state.toAmount)));\n    return (\n        <View style={{ marginTop: Spacing.normal }}>\n            {isETHWETHPair(state.fromToken, state.toToken) ? (\n                <UnsupportedButton state={state} />\n            ) : !state.fromToken || !state.toToken || isEmptyValue(state.fromAmount) || isEmptyValue(state.toAmount) ? (\n                <SupplyButton state={state} onError={setError} disabled={true} />\n            ) : state.loading || loading || !state.pair ? (\n                <FetchingButton />\n            ) : parseBalance(state.fromAmount, state.fromToken.decimals).gt(state.fromToken.balance) ? (\n                <InsufficientBalanceButton symbol={state.fromSymbol} />\n            ) : state.mode === \"normal\" &&\n              parseBalance(state.toAmount, state.toToken.decimals).gt(state.toToken.balance) ? (\n                <InsufficientBalanceButton symbol={state.toSymbol} />\n            ) : (\n                <>\n                    <ApproveButton\n                        token={state.fromToken}\n                        spender={zap ? ZAP_IN : ROUTER}\n                        onSuccess={() => (zap ? setAllowed(true) : state.setFromTokenAllowed(true))}\n                        onError={setError}\n                        hidden={!fromApproveRequired}\n                    />\n                    <ApproveButton\n                        token={state.toToken}\n                        spender={ROUTER}\n                        onSuccess={() => state.setToTokenAllowed(true)}\n                        onError={setError}\n                        hidden={!toApproveRequired}\n                    />\n                    <SupplyButton state={state} onError={setError} disabled={disabled} />\n                </>\n            )}\n            {error.message && error.code !== 4001 && <ErrorMessage error={error} />}\n        </View>\n    );\n};\n\nconst useZapTokenAllowance = (zapToken?: Token) => {\n    const { signer, getTokenAllowance } = useContext(EthersContext);\n    const [allowed, setAllowed] = useState(false);\n    const [loading, setLoading] = useState(false);\n    useAsyncEffect(async () => {\n        setAllowed(false);\n        if (zapToken && signer) {\n            setLoading(true);\n            try {\n                const minAllowance = ethers.BigNumber.from(2)\n                    .pow(96)\n                    .sub(1);\n                if (isETH(zapToken)) {\n                    const fromAllowance = await getTokenAllowance(zapToken.address, ZAP_IN);\n                    setAllowed(ethers.BigNumber.from(fromAllowance).gte(minAllowance));\n                }\n            } finally {\n                setLoading(false);\n            }\n        }\n    }, [zapToken, signer]);\n    return { allowed, setAllowed, loading };\n};\n\nconst SupplyButton = ({\n    state,\n    onError,\n    disabled\n}: {\n    state: AddLiquidityState;\n    onError: (e) => void;\n    disabled: boolean;\n}) => {\n    const t = useTranslation();\n    const goToRemoveLiquidity = useLinker(\"/liquidity/remove\", \"RemoveLiquidity\");\n    const onPress = useCallback(async () => {\n        onError({});\n        try {\n            await state.onAdd();\n            goToRemoveLiquidity();\n        } catch (e) {\n            onError(e);\n        }\n    }, [state.onAdd, onError]);\n    return (\n        <Button\n            title={\n                t(\"supply\") + (state.fromSymbol && state.toSymbol ? \" \" + state.fromSymbol + \"-\" + state.toSymbol : \"\")\n            }\n            disabled={disabled}\n            loading={state.adding}\n            onPress={onPress}\n        />\n    );\n};\n\nexport default LiquidityScreen;\n"],"sourceRoot":""}